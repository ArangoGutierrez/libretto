language: go

go:
  - 1.6
  - 1.7
  - tip

os:
  - linux
  - osx

env:
  matrix:
    - BUILD_GOARCH=amd64
    - BUILD_GOARCH=386

# don't go get deps. will only build with code in vendor directory.
install: true

script:
  - go vet $(go list ./... | grep -v /vendor/)
  - go test -v -race $(go list ./... | grep -v /vendor/)
